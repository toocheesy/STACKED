<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>STACKED!</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ´</text></svg>">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Force landscape orientation message -->
  <div class="orientation-overlay">
    ðŸ”„ Please rotate your device to landscape mode for the best STACKED! experience
  </div>

  <div class="game-container">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="bot-indicators">
        <div class="bot-indicator bot1-indicator">
          ðŸ¤– BOT 1<br>
          <span id="bot1-cards">4 cards</span>
        </div>
        <div class="bot-indicator bot2-indicator">
          ðŸ¤– BOT 2<br>
          <span id="bot2-cards">4 cards</span>
        </div>
      </div>
      
      <div class="scores" id="scores">
        Player: 0 | Bot1: 0 | Bot2: 0
      </div>
      
      <div class="top-right-info">

    <!-- Game Area -->
    <div class="game-area">
      <div class="current-player" id="current-player">Your Turn</div>
      
      <!-- Main game table (preserving your existing board structure) -->
      <div class="table" id="table">
        <div class="board" id="board">
          <!-- Board cards will be rendered here by your existing ui.js -->
        </div>
        
        <!-- Dealer indicator (preserved from your system) -->
        <div class="dealer-indicator" id="dealer-indicator">
          <span>DEALER</span>
        </div>
      </div>
    </div>

    <!-- Player Hand -->
    <div class="player-hand" id="player-hand">
      <!-- Player cards will be rendered here by your existing ui.js -->
    </div>

    <!-- Combo Builder Area (preserving your 5-area system) -->
    <div class="combo-area">
      <div class="combo-title">ðŸŽª COMBO BUILDER</div>
      
      <!-- Base Card (preserving your existing structure) -->
      <div class="combo-section">
        <div class="combo-header">Base Card</div>
        <div class="base-area" data-slot="base" id="base-area"></div>
      </div>

      <!-- Sum Areas (preserving your 3-area system) -->
      <div class="combo-section">
        <div class="combo-header">Sum Combos</div>
        <div class="capture-row">
          <div class="sum-area" data-slot="sum1" id="sum1-area"></div>
          <div class="sum-area" data-slot="sum2" id="sum2-area"></div>
          <div class="sum-area" data-slot="sum3" id="sum3-area"></div>
        </div>
      </div>

      <!-- Match Area (preserving your existing structure) -->
      <div class="combo-section">
        <div class="combo-header">Match Cards</div>
        <div class="match-area" data-slot="match" id="match-area"></div>
      </div>
    </div>
  </div>

  <!-- All your existing modals preserved -->
  <dialog id="scoreboard-modal">
    <div class="confetti-container" id="confetti-container"></div>
    <div class="jackpot-message" id="jackpot-message"></div>
    <div class="scoreboard">
      <div class="scoreboard-title" id="scoreboard-title">Scoreboard</div>
      <div class="scoreboard-list" id="scoreboard-list"></div>
    </div>
    <div class="scoreboard-buttons" id="scoreboard-buttons"></div>
  </dialog>

  <!-- Tutorial modal preserved -->
  <dialog id="tutorial-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>How to Play STACKED!</h2>
      </div>
      <div class="modal-body">
        <h3>Objective:</h3>
        <p>Be the first player to reach 500 points by capturing cards through strategic combinations!</p>
        
        <h3>How to Play:</h3>
        <ul>
          <li><strong>Game Setup:</strong> Each player starts with 4 cards in hand. 4 cards are placed on the board.</li>
          <li><strong>Your Turn:</strong> Drag cards to the play areas to build a combo:
            <ul>
              <li><strong>Pair Capture:</strong> Place a matching card (from hand or board) in the Principal Match area and a matching card in the Play Area. Both areas must include at least one hand card and one board card.</li>
              <li><strong>Sum Capture (2-10 only):</strong> Place the target card in the Principal Match area. In the Play Area, use at least one hand card and one board card whose sum equals the Principal Match card's value. All cards are captured.</li>
            </ul>
          </li>
          <li><strong>Submit Combo:</strong> Click "Submit Move" to capture. Both play areas will glow green if your combo is valid. You can make multiple combos per turn!</li>
          <li><strong>End Turn:</strong> Drag a hand card to the board to place it and end your turn.</li>
          <li><strong>Reset Play Area:</strong> Click "Reset Play Area" to return cards to their original positions.</li>
          <li><strong>Scoring:</strong> Number cards (2-9) are worth 5 points, 10/J/Q/K are worth 10 points, Aces are worth 15 points.</li>
          <li><strong>Game End:</strong> The game ends when the deck runs out. The player with the highest score wins!</li>
        </ul>
        <h3>Tips:</h3>
        <ul>
          <li>Plan your combos carefully to maximize points.</li>
          <li>Watch the botsâ€”they play smarter at higher difficulty levels!</li>
          <li>Secure J, Q, K matches quicklyâ€”they're valuable but can't be used in sums!</li>
        </ul>
      </div>
      <button type="button" onclick="document.getElementById('tutorial-modal').close()">Close</button>
    </div>
  </dialog>

  <!-- ðŸŽ¯ STACKED! Game Scripts - EXACT SAME ORDER! -->
  
  <!-- ðŸ”¥ CONSOLIDATED HELPERS (MUST BE FIRST!) -->
  <script src="js/helpers.js"></script>

  <!-- Core Dependencies -->
  <script src="js/cardIntelligence.js"></script>

  <!-- ðŸŽ¯ GAME STATE MANAGER (CRITICAL FOR GAME FLOW!) -->
  <script src="js/gameStateManager.js"></script>

  <!-- ðŸŽª MODAL MANAGER (BEFORE UI SYSTEM!) -->
  <script src="js/modalManager.js"></script>

  <!-- Core Systems -->
  <script src="js/game.js"></script>
  <script src="js/modeSelector.js"></script>
  <script src="js/MessageController.js"></script>

  <!-- Game Modes -->
  <script src="js/classic.js"></script>
  <script src="js/speed.js"></script>

  <!-- AI Systems -->
  <script src="js/ai.js"></script>
  <script src="js/botModal.js"></script>

  <!-- UI System -->
  <script src="js/ui.js"></script>

  <!-- Main Controller (MUST BE LAST!) -->
  <script src="js/main.js"></script>
</body>
</html>